<% if current_user %>
  <li class="flex align-middle">
    <details class="flex items-center cursor-pointer theme-text dropdown dropdown-bottom dropdown-end white">
      <summary class="items-center h-full center">
        <div class="joband-shadow">
          <div>
            <%= File.read('app/assets/images/icon/bell.svg').html_safe %>
          </div>
          <% if @unread.count > 0 %>
            <div class="absolute top-0 right-[-5px] bg-red-500 text-white rounded-full w-2 h-2 flex items-center justify-center text-sm font-semibold">
              <!-- 使用紅點代替數字，如果沒有未讀通知則不顯示紅點 -->
              <%= content_tag(:div, '', class: 'red-dot') %>
            </div>
          <% end %>
        </div>
      </summary>
      <ul class="p-2 shadow menu dropdown-content z-[1] bg-base-100 rounded-box w-52">
        <% @unread.take(5).each do |notification| %>
          <%= render 'shared/notification', notification: notification %>
        <% end %>
        <% if @read.count > 0 && @unread.count > 0 %>
          <li>
            <hr class="dropdown-divider">
          </li>
        <% elsif @read.count + @unread.count == 0 %>
        <li class="dropdown-item">
          <%= t('目前沒有任何通知') %>
        </li>
        <% end %>
        <% @read.each do |notification| %>
          <%= render 'shared/notification', notification: notification %>
        <% end %>
      </ul>
    </details>
  </li>
<% end %>


